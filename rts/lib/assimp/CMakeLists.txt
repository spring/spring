# Spring's compiler flags break assimp (especially -fsingle-precision-constants)
STRING(REPLACE " -fsingle-precision-constant" "" CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS}")
MESSAGE(STATUS "Building Assimp with flags ${CMAKE_CXX_FLAGS}")

# Define here the needed parameters
set (ASSIMP_VERSION_MAJOR 2)
set (ASSIMP_VERSION_MINOR 0)
set (ASSIMP_VERSION_PATCH 0)
set (ASSIMP_VERSION ${ASSIMP_VERSION_MAJOR}.${ASSIMP_VERSION_MINOR}.${ASSIMP_VERSION_PATCH})
set (ASSIMP_SOVERSION ${ASSIMP_VERSION_MAJOR}.${ASSIMP_VERSION_MINOR})
SET ( PROJECT_VERSION "${ASSIMP_SOVERSION}" )

set(PACKAGE_VERSION "0" CACHE STRING "the package-specific version used for uploading the sources")
set(BUILD_STATIC_LIB 1)

# disable unused modelformats
# grep '#ifndef' assimp/code/ImporterRegistry.cpp
add_definitions(
-DASSIMP_BUILD_NO_IFC_IMPORTER
-DASSIMP_BUILD_NO_X_IMPORTER
-DASSIMP_BUILD_NO_MD3_IMPORTER
-DASSIMP_BUILD_NO_MDL_IMPORTER
-DASSIMP_BUILD_NO_MD2_IMPORTER
-DASSIMP_BUILD_NO_PLY_IMPORTER
-DASSIMP_BUILD_NO_ASE_IMPORTER
-DASSIMP_BUILD_NO_OBJ_IMPORTER
-DASSIMP_BUILD_NO_HMP_IMPORTER
-DASSIMP_BUILD_NO_SMD_IMPORTER
-DASSIMP_BUILD_NO_MDC_IMPORTER
-DASSIMP_BUILD_NO_MD5_IMPORTER
-DASSIMP_BUILD_NO_STL_IMPORTER
-DASSIMP_BUILD_NO_DXF_IMPORTER
-DASSIMP_BUILD_NO_NFF_IMPORTER
-DASSIMP_BUILD_NO_RAW_IMPORTER
-DASSIMP_BUILD_NO_OFF_IMPORTER
-DASSIMP_BUILD_NO_AC_IMPORTER
-DASSIMP_BUILD_NO_BVH_IMPORTER
-DASSIMP_BUILD_NO_IRRMESH_IMPORTER
-DASSIMP_BUILD_NO_IRR_IMPORTER
-DASSIMP_BUILD_NO_Q3D_IMPORTER
-DASSIMP_BUILD_NO_B3D_IMPORTER
-DASSIMP_BUILD_NO_TERRAGEN_IMPORTER
-DASSIMP_BUILD_NO_CSM_IMPORTER
-DASSIMP_BUILD_NO_3D_IMPORTER
-DASSIMP_BUILD_NO_LWS_IMPORTER
-DASSIMP_BUILD_NO_OGRE_IMPORTER
-DASSIMP_BUILD_NO_MS3D_IMPORTER
-DASSIMP_BUILD_NO_COB_IMPORTER
-DASSIMP_BUILD_NO_Q3BSP_IMPORTER
-DASSIMP_BUILD_NO_NDO_IMPORTER
-DASSIMP_BUILD_NO_IFC_IMPORTER
-DASSIMP_BUILD_NO_M3_IMPORTER
-DASSIMP_BUILD_NO_XGL_IMPORTER
)

if(NOT DEBUG_BUILD)
	add_definitions(-DASSIMP_BUILD_NO_VALIDATEDS_PROCESS)
endif()

# Assimp code
ADD_SUBDIRECTORY(code)

